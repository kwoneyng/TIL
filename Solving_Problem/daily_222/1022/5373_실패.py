def rotate(ls):
    ls[0][0],ls[0][2],ls[2][2],ls[2][0] = ls[2][0],ls[0][0],ls[0][2],ls[2][2]
    ls[0][1],ls[1][2],ls[2][1],ls[1][0] = ls[1][0],ls[0][1],ls[1][2],ls[2][1] 

def rot_m(ls):
    ls[0][0],ls[2][0],ls[2][2],ls[0][2] = ls[0][2],ls[0][0],ls[2][0],ls[2][2]
    ls[0][1],ls[1][0],ls[2][1],ls[1][2] = ls[1][2],ls[0][1],ls[1][0],ls[2][1]

def cycle(st):
    pl, di = st
    if pl == 'U':
        if di == '+':
            rotate(bd[0])
            bd[2][0],bd[5][0],bd[3][0],bd[4][0] = bd[5][0],bd[3][0],bd[4][0],bd[2][0]
        else:
            rot_m(bd[0])
            bd[2][0],bd[5][0],bd[3][0],bd[4][0] = bd[4][0],bd[2][0],bd[5][0],bd[3][0]
    elif pl == 'D':
        if di == '+':
            rotate(bd[1])
            bd[2][2],bd[5][2],bd[3][2],bd[4][2] = bd[4][2],bd[2][2],bd[5][2],bd[3][2]
        else:
            rot_m(bd[1])
            bd[2][2],bd[5][2],bd[3][2],bd[4][2] = bd[5][2],bd[3][2],bd[4][2],bd[2][2]
    elif pl == 'F':
        if di == '+':
            rotate(bd[2])
            temp = bd[0][2][:]
            bd[0][2][0],bd[0][2][1],bd[0][2][2] = bd[4][2][2], bd[4][1][2], bd[4][0][2]
            bd[4][0][2], bd[4][1][2], bd[4][2][2] = bd[1][2][0],bd[1][2][1],bd[1][2][2]
            bd[1][2][0],bd[1][2][1],bd[1][2][2] = bd[5][2][0],bd[5][1][0],bd[5][0][0]
            bd[5][0][0], bd[5][1][0], bd[5][2][0] = temp[0],temp[1],temp[2]
        else:
            rot_m(bd[2])
            temp = bd[0][2][:]
            bd[0][2][0],bd[0][2][1],bd[0][2][2] = bd[5][0][0],bd[5][1][0],bd[5][2][0]
            bd[5][0][0], bd[5][1][0], bd[5][2][0] = bd[1][2][0],bd[1][2][1],bd[1][2][2]
            bd[1][2][0],bd[1][2][1],bd[1][2][2] = bd[4][0][2], bd[4][1][2], bd[4][2][2]
            bd[4][0][2], bd[4][1][2], bd[4][2][2] = temp[2],temp[1],temp[0]
    elif pl == 'B':
        if di == '+':
            rotate(bd[3])
            temp = bd[0][0][:]
            bd[0][0][0],bd[0][0][1],bd[0][0][2] = bd[5][0][2],bd[5][1][2],bd[5][2][2]
            bd[5][0][2],bd[5][1][2],bd[5][2][2] = bd[1][0][2],bd[1][0][1],bd[1][0][0]
            bd[1][0][2],bd[1][0][1],bd[1][0][0] = bd[4][2][0],bd[4][1][0],bd[4][0][0]
            bd[4][2][0],bd[4][1][0],bd[4][0][0] = temp[0],temp[1],temp[2]
        else :
            rot_m(bd[3])
            temp = bd[0][0][:]
            bd[0][0][0],bd[0][0][1],bd[0][0][2] = bd[4][2][0],bd[4][1][0],bd[4][0][0]
            bd[4][2][0],bd[4][1][0],bd[4][0][0] = bd[1][0][0],bd[1][0][1],bd[1][0][2]
            bd[1][0][0],bd[1][0][1],bd[1][0][2] = bd[5][2][2],bd[5][1][2],bd[5][0][2]
            bd[5][0][2],bd[5][1][2],bd[5][2][2] = temp[0],temp[1],temp[2]
    elif pl == 'L':
        if di == '-':
            rot_m(bd[4])
            temp = [bd[0][0][0],bd[0][1][0],bd[0][2][0]]
            bd[0][0][0],bd[0][1][0],bd[0][2][0] = bd[2][0][0],bd[2][1][0],bd[2][2][0]
            bd[2][0][0],bd[2][1][0],bd[2][2][0] = bd[1][2][0],bd[1][1][0],bd[1][0][0]
            bd[1][2][0],bd[1][1][0],bd[1][0][0] = bd[3][2][2],bd[3][1][2],bd[3][0][2]
            bd[3][2][2],bd[3][1][2],bd[3][0][2] = temp[0],temp[1],temp[2]
        else:    
            rotate(bd[4])
            temp = [bd[0][0][0],bd[0][1][0],bd[0][2][0]]
            bd[0][0][0],bd[0][1][0],bd[0][2][0] = bd[3][2][2],bd[3][1][2],bd[3][0][2]
            bd[3][2][2],bd[3][1][2],bd[3][0][2] = bd[1][2][0],bd[1][1][0],bd[1][0][0]
            bd[1][2][0],bd[1][1][0],bd[1][0][0] = bd[2][0][0],bd[2][1][0],bd[2][2][0]
            bd[2][0][0],bd[2][1][0],bd[2][2][0] = temp[0],temp[1],temp[2]           
    elif pl =='R':
        if di == '+':
            rotate(bd[5])
            temp = [bd[0][0][2],bd[0][1][2],bd[0][2][2]]
            bd[0][0][2],bd[0][1][2],bd[0][2][2] = bd[2][0][2],bd[2][1][2],bd[2][2][2]
            bd[2][0][2],bd[2][1][2],bd[2][2][2] = bd[1][2][2],bd[1][1][2],bd[1][0][2]
            bd[1][2][2],bd[1][1][2],bd[1][0][2] = bd[3][2][2],bd[3][1][2],bd[3][0][2]
            bd[3][2][2],bd[3][1][2],bd[3][0][2] = temp[0],temp[1],temp[2]
        else:
            rot_m(bd[5])
            temp = [bd[0][0][2],bd[0][1][2],bd[0][2][2]]
            bd[0][0][2],bd[0][1][2],bd[0][2][2] = bd[3][2][0],bd[3][1][0],bd[3][0][0]
            bd[3][2][0],bd[3][1][0],bd[3][0][0] = bd[1][2][2],bd[1][1][2],bd[1][0][2]
            bd[1][2][2],bd[1][1][2],bd[1][0][2] = bd[2][0][2],bd[2][1][2],bd[2][2][2]
            bd[2][0][2],bd[2][1][2],bd[2][2][2] = temp[0],temp[1],temp[2]
    

for t in range(int(input())):
    n = int(input())
    data = list(input().split())
    bd=[]
    bd.append([['w']*3 for i in range(3)])
    bd.append([['y']*3 for i in range(3)])
    bd.append([['r']*3 for i in range(3)])
    bd.append([['o']*3 for i in range(3)])
    bd.append([['g']*3 for i in range(3)])
    bd.append([['b']*3 for i in range(3)])
    for i in data:
        cycle(i)
    for i in bd[0]:
        print(''.join(i))
    